@import './theme/tokens.css';

:root {
  color-scheme: light;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  background: var(--color-gradient);
  color: var(--color-text);
  font-family: var(--font-body);
  font-weight: var(--font-weight-regular);
  line-height: 1.5;
  transition: background 0.9s var(--ease-standard), color var(--motion-base) var(--ease-standard);
}

body[data-theme='night'] {
  color-scheme: dark;
}

a { color: inherit; text-decoration: none; }

#root { min-height: 100vh; }

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

/* Background */
.animated-bg {
  position: fixed;
  inset: 0;
  overflow: hidden;
  z-index: 0;
  pointer-events: none;
}

.animated-bg .gradient {
  position: absolute;
  inset: 0;
  background: var(--color-gradient);
  transition: background 0.9s var(--ease-standard);
}

.sky-layer {
  position: absolute;
  inset: 0;
  mix-blend-mode: screen;
  opacity: 0.22;
  background: radial-gradient(ellipse at 15% 20%, rgba(255, 255, 255, 0.15), transparent 38%),
    radial-gradient(ellipse at 70% 10%, rgba(255, 255, 255, 0.12), transparent 42%),
    radial-gradient(ellipse at 40% 75%, rgba(255, 255, 255, 0.1), transparent 40%);
  filter: blur(20px);
  transition: opacity var(--motion-base) ease;
}

body[data-theme='night'] .sky-layer { opacity: 0.08; }

.sky-orb {
  position: absolute;
  width: 280px;
  height: 280px;
  top: -40px;
  right: 8%;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff8d6, #f3d08a 60%, rgba(243, 208, 138, 0));
  filter: drop-shadow(0 32px 60px rgba(243, 208, 138, 0.28));
  transition: all var(--motion-base) var(--ease-standard);
}

body[data-theme='night'] .sky-orb {
  width: 220px;
  height: 220px;
  top: 32px;
  background: radial-gradient(circle at 40% 35%, #fef3bf, #f9e09f 60%, rgba(249, 224, 159, 0));
  filter: drop-shadow(0 30px 60px rgba(249, 224, 159, 0.28));
}

.starfield {
  position: absolute;
  inset: 0;
  opacity: 0;
  background-image:
    radial-gradient(1.6px 1.6px at 18% 12%, rgba(255, 255, 255, 0.85), transparent),
    radial-gradient(1.4px 1.4px at 78% 22%, rgba(255, 255, 255, 0.7), transparent),
    radial-gradient(1.8px 1.8px at 54% 48%, rgba(255, 255, 255, 0.6), transparent),
    radial-gradient(1.2px 1.2px at 32% 70%, rgba(255, 255, 255, 0.65), transparent);
  animation: twinkle 11s ease-in-out infinite;
  transition: opacity 0.8s ease;
}

body[data-theme='night'] .starfield { opacity: 0.6; }

@keyframes twinkle {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 0.8; filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.18)); }
}

/* Layout */
.layout-shell {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: var(--space-5);
  padding: var(--space-5);
}

.sidebar {
  position: sticky;
  top: var(--space-5);
  align-self: start;
}

.sidebar-panel {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--space-5) var(--space-4);
  box-shadow: var(--shadow-soft);
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
  backdrop-filter: blur(10px);
}

.sidebar h1 {
  margin: 0;
  font-size: var(--type-xl);
  letter-spacing: 0.01em;
  color: var(--color-text-strong);
}

.sidebar .subtle { margin: 0; }

.nav-links { display: flex; flex-direction: column; gap: var(--space-2); }

.nav-button {
  background: transparent;
  border: 1px solid transparent;
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-md);
  color: var(--color-text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  transition: transform var(--motion-fast) var(--ease-standard),
    background var(--motion-base) var(--ease-standard),
    border var(--motion-base) var(--ease-standard);
}

.nav-button:hover { background: var(--color-accent-soft); border-color: var(--color-border); transform: translateX(4px); }
.nav-button.active { background: linear-gradient(120deg, var(--color-accent-soft), transparent); border-color: var(--color-accent); color: var(--color-text-strong); box-shadow: var(--glow-accent); }

.nav-kicker {
  font-size: var(--type-xs);
  color: var(--color-text-muted);
}

.content { padding: var(--space-2) var(--space-2) var(--space-6); }

/* Top bar */
.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-4);
  margin-bottom: var(--space-3);
}

.topbar .title { display: flex; flex-direction: column; gap: var(--space-2); }
.topbar .title h2 { margin: 0; font-size: var(--type-xl); color: var(--color-text-strong); }

.badge-row { display: flex; flex-wrap: wrap; gap: var(--space-2); align-items: center; }

.pill {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  border-radius: 999px;
  background: var(--color-surface-muted);
  color: var(--color-text-strong);
  font-size: var(--type-sm);
  border: 1px solid var(--color-border);
}

.pill.muted { background: transparent; color: var(--color-text-muted); }
.pill.danger { background: rgba(192, 93, 114, 0.12); color: var(--color-danger); border-color: rgba(192, 93, 114, 0.28); }
.pill.success { background: rgba(47, 122, 107, 0.14); color: var(--color-accent-strong); border-color: rgba(47, 122, 107, 0.2); }
.pill.warning { background: rgba(210, 138, 60, 0.12); color: var(--color-warning); border-color: rgba(210, 138, 60, 0.2); }

.pill-select {
  background: transparent;
  border: none;
  color: inherit;
  font-weight: var(--font-weight-strong);
  padding: 0.1rem 0.35rem;
  border-radius: var(--radius-sm);
}

.pill-select:focus {
  outline: 2px solid var(--color-border-strong);
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-sm);
  font-weight: var(--font-weight-strong);
  font-size: var(--type-xs);
  background: var(--color-surface-strong);
  border: 1px solid var(--color-border);
  color: var(--color-text);
}
.badge.success { color: var(--color-accent-strong); border-color: rgba(47, 122, 107, 0.26); }
.badge.warning { color: var(--color-warning); border-color: rgba(210, 138, 60, 0.28); }
.badge.danger { color: var(--color-danger); border-color: rgba(192, 93, 114, 0.25); }

/* Hero */
.hero {
  position: relative;
  background: var(--color-hero);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  overflow: hidden;
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-strong);
  margin-bottom: var(--space-4);
  background-size: cover;
  background-position: calc(50% + var(--parallax-x, 0px)) calc(50% + var(--parallax-y, 0px));
  --parallax-x: 0px;
  --parallax-y: 0px;
}

.hero::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.04), rgba(0, 0, 0, 0.04));
  pointer-events: none;
}

.hero-mesh {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 20% 30%, rgba(47, 122, 107, 0.18), transparent 40%),
    radial-gradient(circle at 70% 20%, rgba(214, 180, 124, 0.14), transparent 42%),
    radial-gradient(circle at 40% 70%, rgba(47, 122, 107, 0.12), transparent 46%);
  transform: translate3d(var(--parallax-x, 0px), var(--parallax-y, 0px), 0);
  transition: transform var(--motion-slow) var(--ease-standard);
  opacity: 0.65;
}

body[data-theme='night'] .hero-mesh { opacity: 0.4; }

@media (prefers-reduced-motion: reduce) {
  .hero { background-position: center; }
  .hero-mesh { transform: none !important; }
}

.hero-grid {
  position: relative;
  display: grid;
  grid-template-columns: 1.6fr 1fr;
  gap: var(--space-4);
  align-items: stretch;
  z-index: 1;
}

.hero-left { display: grid; gap: var(--space-3); }

.hero-title { display: flex; justify-content: space-between; align-items: center; gap: var(--space-3); }
.hero-title h1 { margin: 0; font-size: var(--type-xxl); font-family: var(--font-display); letter-spacing: 0.02em; color: var(--color-text-strong); }
.hero-sub { margin: 0; color: var(--color-text-muted); }

.hero-kpis { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: var(--space-3); }

.kpi-card {
  background: var(--color-surface-strong);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  display: grid;
  gap: var(--space-2);
  box-shadow: var(--shadow-soft);
  transition: transform var(--motion-fast) var(--ease-emphasis), box-shadow var(--motion-base) var(--ease-standard);
}

.kpi-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-strong); }

.kpi-label { color: var(--color-text-muted); font-size: var(--type-xs); text-transform: uppercase; letter-spacing: 0.04em; }

.kpi-value { font-size: var(--type-xl); font-family: var(--font-display); color: var(--color-text-strong); }

.kpi-meta { color: var(--color-text-muted); font-size: var(--type-sm); }

.hero-badges { display: flex; flex-wrap: wrap; gap: var(--space-2); }

/* Cards & sections */
.section-block { margin: var(--space-5) 0; display: grid; gap: var(--space-3); }
.section-head { display: flex; align-items: center; justify-content: space-between; gap: var(--space-3); }
.section-head h2 { margin: 0; font-size: var(--type-xl); letter-spacing: 0.01em; display: flex; align-items: center; gap: var(--space-2); }
.section-head p { margin: 0; color: var(--color-text-muted); }

.organic-divider { width: 100%; height: 32px; opacity: 0.6; }

.card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-3); }

.card {
  background: var(--color-surface-strong);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  box-shadow: var(--shadow-soft);
  backdrop-filter: blur(10px);
  transition: transform var(--motion-fast) var(--ease-emphasis), box-shadow var(--motion-base) var(--ease-standard);
}

.card:hover { transform: translateY(-2px); box-shadow: var(--shadow-strong); }

.card h3 { margin: 0 0 var(--space-2) 0; font-size: var(--type-lg); }
.card .value { font-size: var(--type-xl); font-family: var(--font-display); color: var(--color-text-strong); }
.subtle { color: var(--color-text-muted); font-size: var(--type-sm); }
.subtitle { color: var(--color-text-muted); font-size: var(--type-sm); margin: 0 0 var(--space-2) 0; }
.metric-row { display: flex; align-items: baseline; gap: var(--space-2); }
.glow { color: var(--color-accent-strong); }

.section-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: var(--space-3); }

.chart-shell { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-3); }

.table-wrapper {
  overflow: hidden;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-soft);
  background: var(--color-surface-strong);
  backdrop-filter: blur(10px);
}

.device-table { width: 100%; border-collapse: collapse; }
.device-table th, .device-table td { padding: var(--space-3); border-bottom: 1px solid var(--color-border); text-align: left; font-size: var(--type-sm); }
.device-table th { color: var(--color-text-muted); font-size: var(--type-xs); text-transform: uppercase; letter-spacing: 0.02em; }
.device-row { transition: background var(--motion-fast) var(--ease-standard), transform var(--motion-fast) var(--ease-standard); }
.device-row:hover { background: var(--color-accent-soft); transform: translateX(2px); }

.filter-chips { display: flex; flex-wrap: wrap; gap: var(--space-2); margin-bottom: var(--space-2); }
.chip {
  border: 1px solid var(--color-border);
  background: var(--color-surface-muted);
  padding: var(--space-2) var(--space-3);
  border-radius: 999px;
  cursor: pointer;
  color: var(--color-text);
  transition: background var(--motion-fast) var(--ease-standard), transform var(--motion-fast) var(--ease-standard);
}
.chip.active { background: var(--color-accent-soft); border-color: var(--color-accent); color: var(--color-text-strong); transform: translateY(-1px); }

.sparkline { display: flex; gap: 2px; align-items: flex-end; height: 48px; }
.sparkline span { flex: 1; background: linear-gradient(180deg, var(--color-accent), var(--color-accent-strong)); border-radius: 6px 6px 2px 2px; }

.toast {
  position: fixed;
  bottom: var(--space-4);
  right: var(--space-4);
  background: var(--color-surface-strong);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-3) var(--space-4);
  box-shadow: var(--shadow-strong);
  animation: fade-in-up var(--motion-base) var(--ease-standard);
}

.empty-state {
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-surface);
  padding: var(--space-4);
  text-align: center;
  display: grid;
  gap: var(--space-3);
  color: var(--color-text-muted);
}

.empty-illustration { width: 120px; margin: 0 auto; opacity: 0.9; }

@keyframes fade-in-up { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

.organic-line { stroke: var(--color-accent-soft); stroke-width: 2; fill: none; }

/* Responsive */
@media (max-width: 1200px) {
  .layout-shell { grid-template-columns: 1fr; }
  .sidebar { position: relative; top: 0; }
  .sidebar-panel { flex-direction: column; }
  .hero-grid { grid-template-columns: 1fr; }
}

@media (max-width: 800px) {
  .content { padding: var(--space-2); }
  .topbar { flex-direction: column; align-items: flex-start; }
  .section-head { flex-direction: column; align-items: flex-start; }
}

@media (max-width: 640px) {
  .nav-links { flex-direction: row; flex-wrap: wrap; }
  .nav-button { flex: 1 1 48%; }
}
